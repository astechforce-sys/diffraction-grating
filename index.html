<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Diffraction Grating Simulation</title>
<style>
  :root {
    --bg-color: #f5f5f5;
    --wall-color: #888;
  }

  body {
    background: var(--bg-color);
    margin: 0;
    font-family: "Segoe UI", sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    overflow-x: hidden;
  }

  h1 {
    margin: 15px 0;
    font-weight: 500;
  }

  .container {
    width: 95%;
    max-width: 1000px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  canvas {
    width: 100%;
    height: auto;
    background: #efefef;
    border-radius: 6px;
    border: 1px solid #ccc;
  }

  .controls {
    margin-top: 10px;
    width: 100%;
    max-width: 600px;
    text-align: center;
  }

  .label {
    font-size: 1rem;
    margin-bottom: 4px;
    display: block;
  }

  input[type="range"] {
    width: 80%;
    height: 8px;
    border-radius: 4px;
    background: linear-gradient(to right, violet, blue, cyan, green, yellow, orange, red);
    outline: none;
    -webkit-appearance: none;
    appearance: none;
  }

  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #fff;
    border: 2px solid #888;
    cursor: pointer;
  }

  .info {
    text-align: justify;
  }

  @media (max-width: 600px) {
    h1 { font-size: 1.2rem; }
    .label { font-size: 0.9rem; }
  }
</style>
</head>
<body>
  <h1>Diffraction Grating</h1>
  <div class="container">
    <canvas id="canvas" width="900" height="400"></canvas>
    <div class="controls">
      <span class="label">wavelength = <span id="lambdaValue">600</span> nm</span>
      <input type="range" id="lambda" min="400" max="700" value="600" />
    </div>
    <div class="info">
    <p>
     The diffraction grating is a transparent plate with very narrow lines on the surface.
    </p>
    <p>
      Light (photons) like to go in the same phase. In the same phase, constructive 
      interference occurs. If the phases are different, the waves cancel each other out.
    </p>
    <p>
      The light that passes through the hole in the diffraction grating has the opportunity 
      to spread in many ways, but it tries to match the phases of the waves because they want 
      all the lights to go to the same state. Therefore, the light passing through the holes travels only at a certain angle, depending on the wavelength.
    </p>
  </div>
  </div>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const lambdaSlider = document.getElementById('lambda');
const lambdaValue = document.getElementById('lambdaValue');

let wavelength = 600;
let phase = 0;

// wavelength to color converter
function wavelengthToRGB(lambda) {
  let R=0,G=0,B=0;
  if (lambda >= 380 && lambda < 440) { R=-(lambda-440)/(440-380); G=0; B=1; }
  else if (lambda >= 440 && lambda < 490) { R=0; G=(lambda-440)/(490-440); B=1; }
  else if (lambda >= 490 && lambda < 510) { R=0; G=1; B=-(lambda-510)/(510-490); }
  else if (lambda >= 510 && lambda < 580) { R=(lambda-510)/(580-510); G=1; B=0; }
  else if (lambda >= 580 && lambda < 645) { R=1; G=-(lambda-645)/(645-580); B=0; }
  else if (lambda >= 645 && lambda <= 780) { R=1; G=0; B=0; }
  return `rgb(${Math.round(R*255)},${Math.round(G*255)},${Math.round(B*255)})`;
}

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const color = wavelengthToRGB(wavelength);
  const numWaves = 7;
  const spacing = canvas.height / (numWaves + 1);

  // ⚙️ Adjusted wave amplitude and frequency for tighter curves
  const amplitude = 5;  // smaller waves (was 12)
  const k = (2*Math.PI)/(wavelength/20); // tighter wavelength spacing (was /2.3)

  // left side waves
  ctx.lineWidth = 2;
  ctx.strokeStyle = color;
  for (let i=0; i<numWaves; i++) {
    ctx.beginPath();
    for (let x=0; x<canvas.width*0.55; x++) {
      const y = spacing*(i+1) + amplitude*Math.sin(k*x - phase);
      if (x===0) ctx.moveTo(x, y);
      else ctx.lineTo(x, y);
    }
    ctx.stroke();
  }

  // gray diffraction grating wall
  const wallX = canvas.width*0.55;
  const wallWidth = 50;
  ctx.fillStyle = '#888';
  ctx.beginPath();
  ctx.moveTo(wallX, 40);
  ctx.lineTo(wallX+wallWidth, 20);
  ctx.lineTo(wallX+wallWidth, canvas.height-20);
  ctx.lineTo(wallX, canvas.height-40);
  ctx.closePath();
  ctx.fill();

  // slits
  ctx.fillStyle = '#efefef';
  const slitCount = 5;
  const slitHeight = 25;
  for (let s=0; s<slitCount; s++) {
    const y = spacing*(s+1) - slitHeight/2;
    ctx.fillRect(wallX, y, wallWidth, slitHeight);
  }

  // right side diffracted waves
  ctx.strokeStyle = color;
  for (let i=0; i<slitCount; i++) {
    ctx.beginPath();
    for (let x=wallX+wallWidth; x<canvas.width; x++) {
      const offset = (i - slitCount/2)*0.15;
      const y = spacing*(i+1.2) + amplitude*Math.sin(k*(x-wallX) - phase + offset);
      if (x===wallX+wallWidth) ctx.moveTo(x, y);
      else ctx.lineTo(x, y);
    }
    ctx.stroke();
  }

  phase += 0.08;
  requestAnimationFrame(draw);
}

lambdaSlider.oninput = function() {
  wavelength = parseFloat(this.value);
  lambdaValue.textContent = wavelength;
};

draw();
</script>
</body>
</html>








